(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{24:function(e,t,a){e.exports=a(37)},29:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),o=(a(29),a(8)),s=a(6),i=a(11),m=a(9),u=a(3),d=a(14),f=a.n(d),p=a(21),h=a.n(p),E=function(e){var t=Object(n.useState)({username:null,password:null}),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(null),s=Object(u.a)(o,2),d=s[0],p=s[1],E=function(e,t){c(Object(m.a)({},l,Object(i.a)({},t,e)))};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-md-6 mt-5 mx-auto text-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{onChange:function(e){return E(e.target.value,e.target.name)},autoFocus:!0,type:"text",className:"form-control",id:"exampleInputEmail1",name:"username",placeholder:"Enter email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{onChange:function(e){return E(e.target.value,e.target.name)},type:"password",className:"form-control",id:"exampleInputPassword1",name:"password",placeholder:"Password"})),r.a.createElement("button",{onClick:function(t){t.preventDefault(),fetch("auth/authentication/api/public/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-TOKEN":f.a.get("CSRF-TOKEN")},body:h.a.stringify({username:l.username,password:l.password})}).then((function(e){if(200!==e.status)throw Error(e.statusText);return e})).then((function(t){p(null),e.history.push("/")})).catch((function(e){p("Something went wrong. Please try again!")}))},type:"submit",className:"btn btn-primary"},"Submit")),d?r.a.createElement("div",{className:"alert alert-danger mt-4",role:"alert"},d):null))},b=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){fetch("auth/authentication/api/public/authentication",{method:"GET",withCredentials:!0,credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){e?(sessionStorage.setItem("loggedIn",!0),sessionStorage.getItem("loggedIn",!0)?c(!0):c(!1)):c(!1)}))}),[]),!0===l||!1===l?!1===l?r.a.createElement(s.a,{to:"/login"}):e.children:r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center vh-100"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},g=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),o=Object(u.a)(c,2),i=o[0],m=o[1];return a?r.a.createElement(s.a,{to:"/login"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){fetch("auth/authentication/api/public/logout",{method:"GET"}).then((function(e){if(200!==e.status)throw Error(e.statusText);return e})).then((function(e){sessionStorage.clear(),l(!0)})).catch((function(e){m("Something went wrong. Please try again!")}))}},"Logout"),i?r.a.createElement("div",{className:"alert alert-danger mt-4",role:"alert"},i):null)},w=function(){var e=Object(n.useState)({credentials:null,recipients:null,loading:!1,filter:sessionStorage.getItem("filter")}),t=Object(u.a)(e,2),a=t[0],l=t[1],c=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(a.filter);Object(n.useEffect)((function(){c!==a.filter&&(sessionStorage.getItem("filter")?sessionStorage.setItem("filter",a.filter):sessionStorage.setItem("filter","from=01-01-0001&to=31-12-9998"),fetch("/atnr/api/issuers/8234f938-753b-4bf3-be99-13faadfb3480/recipients",{method:"GET"}).then((function(e){return e.json()})).then((function(e){e&&fetch("/atnr/api/issuers/8234f938-753b-4bf3-be99-13faadfb3480/credentials?".concat(sessionStorage.getItem("filter")),{method:"GET"}).then((function(e){return e.json()})).then((function(t){l(Object(m.a)({},a,{credentials:t.credentials,recipients:e}))}))})))}),[a,c]);return r.a.createElement(b,null,r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"row pt-5"},r.a.createElement("div",{className:"col-md-6 mx-auto text-center"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-outline-primary shadow-none dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Sort by Status"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},["All","Reference%20Letter(ext)","Diploma"].map((function(e,t){return r.a.createElement("span",{key:t,onClick:function(){return n=e,void l("credentialClassName"===(t="credentialClassName")&&"All"===n?Object(m.a)({},a,{filter:"from=01-01-0001&to=31-12-9998"}):Object(m.a)({},a,{filter:"".concat(t,"=").concat(n,"&from=01-01-0001&to=31-12-9998")}));var t,n},className:"dropdown-item"},e)})))),r.a.createElement("ul",{className:"list-group my-4"},a.credentials?a.credentials.map((function(e,t){return r.a.createElement(o.b,{key:t,to:"/credential-details/"+e.credential.id},r.a.createElement("li",{className:"list-group-item"},e.credential.credentialClass.name))})):r.a.createElement("div",{className:"spinner-border text-primary mx-auto my-5",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement(g,null)))))},v=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){fetch("/atnr/api/public/credentials/".concat(e.match.params.id),{method:"GET"}).then((function(e){return e.json()})).then((function(e){c(e.credential)}))}),[e]),r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto text-center"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Credential ID:"),r.a.createElement("span",null,l.id),r.a.createElement("h3",null,"Credential Name:"),r.a.createElement("span",null,l.credentialClass.name)):null)))};var N=function(){return r.a.createElement(o.a,null,r.a.createElement(s.b,{path:"/",exact:!0,component:w}),r.a.createElement(s.b,{path:"/login",component:E}),r.a.createElement(s.b,{path:"logout",component:g}),r.a.createElement(s.b,{path:"/credential-details/:id",component:v}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.f99a6001.chunk.js.map